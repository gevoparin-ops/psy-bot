"""
–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –∫ –ø—Å–∏—Ö–æ–ª–æ–≥—É –ì–µ–Ω–Ω–∞–¥–∏—é –û–ø–∞—Ä–∏–Ω—É
=====================================================
–£—Å—Ç–∞–Ω–æ–≤–∫–∞:
    pip install python-telegram-bot==20.7

–ó–∞–ø—É—Å–∫ (–ª–æ–∫–∞–ª—å–Ω–æ):
    python psychologist_bot.py

–î–ª—è –æ–±–ª–∞–∫–∞: —Ç–æ–∫–µ–Ω –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è BOT_TOKEN.
"""

import os
import logging
from telegram import (
    Update,
    InlineKeyboardButton,
    InlineKeyboardMarkup,
)
from telegram.ext import (
    Application,
    CommandHandler,
    CallbackQueryHandler,
    ContextTypes,
)

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# –ù–ê–°–¢–†–û–ô–ö–ò
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

BOT_TOKEN = os.environ.get("BOT_TOKEN", "–í–ê–®_–¢–û–ö–ï–ù_–°–Æ–î–ê")

PSYCHOLOGIST_NAME = "–ì–µ–Ω–Ω–∞–¥–∏–π –û–ø–∞—Ä–∏–Ω"
TELEGRAM_USERNAME = "@geoparin"

# –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫)
LINK_PERSONAL_DATA = "https://disk.yandex.ru/i/4E2St6o2PkGHvA"
LINK_PRIVACY_POLICY = "https://disk.yandex.ru/i/jJKKUA2QqisGew"

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# –¶–ï–ù–û–û–ë–†–ê–ó–û–í–ê–ù–ò–ï
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

PRICE_OFFLINE_IND = "4 000 ‚ÇΩ"
PRICE_OFFLINE_COUPLE = "6 000 ‚ÇΩ"

PRICE_ONLINE_IND = "5 000 ‚ÇΩ"
PRICE_ONLINE_COUPLE = "7 000 ‚ÇΩ"

DURATION_IND = "50 –º–∏–Ω—É—Ç"
DURATION_COUPLE = "1 —á–∞—Å 20 –º–∏–Ω—É—Ç"

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# –¢–ï–ö–°–¢–´
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

WELCOME_TEXT = (
    "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã\n\n"
    "–Ø ‚Äî –±–æ—Ç –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –ì–µ–Ω–Ω–∞–¥–∏—è –û–ø–∞—Ä–∏–Ω–∞.\n"
    "–ß–µ—Ä–µ–∑ –º–µ–Ω—è –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –≤—Å—Ç—Ä–µ—á—É, —É–∑–Ω–∞—Ç—å –æ —Ñ–æ—Ä–º–∞—Ç–∞—Ö —Ä–∞–±–æ—Ç—ã –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π.\n\n"
    "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª üëá"
)

# ‚îÄ‚îÄ‚îÄ –û–±–æ –º–Ω–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

ABOUT_TEXT = (
    "üë§ <b>–û–±–æ –º–Ω–µ –∏ –º–µ—Ç–æ–¥–∞—Ö —Ä–∞–±–æ—Ç—ã</b>\n\n"
    "–ü–æ–º–æ–≥–∞—é —Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –±—Ä–æ—Å–∞—Ç—å —Å–µ–±—è.\n\n"
    "‚ö†Ô∏è <i>–í–∞–∂–Ω–æ: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–æ—Å–∏—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä. "
    "–ù–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–∏–µ–π –∏ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –ª–∏—á–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞. "
    "–ü—Ä–∏ –æ—Å—Ç—Ä—ã—Ö –∫—Ä–∏–∑–∏—Å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã: "
    "–ø–æ –†–§ ‚Äî 112 (–∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ), –ú–æ—Å–∫–≤–∞ ‚Äî 051, "
    "–ö–æ—Å—Ç—Ä–æ–º–∞ ‚Äî 43-28-28 (—Å 8 –¥–æ 24 —á).</i>\n\n"
    "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n"
    "<b>–û–±–æ –º–Ω–µ</b>\n"
    "–ì–µ–Ω–Ω–∞–¥–∏–π –û–ø–∞—Ä–∏–Ω, –ø—Å–∏—Ö–æ–ª–æ–≥, —Ä–∞–±–æ—Ç–∞—é –≤ –ø–æ–¥—Ö–æ–¥–µ –¢—Ä–∞–Ω–∑–∞–∫—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–¢–ê). "
    "–ü–æ–º–æ–≥–∞—é —Å–µ–º–µ–π–Ω—ã–º –ø–∞—Ä–∞–º –Ω–∞–ª–∞–¥–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç –∏ –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –∫—Ä–∏–∑–∏—Å—ã, "
    "–∞ —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞—é –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ —Å —Ç–µ–º–∏, –∫—Ç–æ —Ö–æ—á–µ—Ç –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç "
    "–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏—Ö —É–±–µ–∂–¥–µ–Ω–∏–π –∏ —Ä–∞–Ω–Ω–∏—Ö —Ä–µ—à–µ–Ω–∏–π, –≤–ª–∏—è—é—â–∏—Ö –Ω–∞ –≤–∑—Ä–æ—Å–ª—É—é –∂–∏–∑–Ω—å. "
    "–Ø –≤–µ—Ä—é, —á—Ç–æ –∫–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ —Å–ø–æ—Å–æ–±–µ–Ω –¥—É–º–∞—Ç—å, –¥–µ–ª–∞—Ç—å –ª—É—á—à–∏–π –≤—ã–±–æ—Ä "
    "–≤ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç –∏ –∂–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –∂–∏–∑–Ω—å—é. –ò–Ω–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ "
    "–ø–æ–º–æ—â–∏, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å —Å–µ–±—è, —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞ –∏ –ø–æ—Å—Ç—É–ø–∫–∏.\n\n"
    "–°–æ—Å—Ç–æ—é –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—Å–∫–æ–π –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¢—Ä–∞–Ω–∑–∞–∫—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞. "
    "–ü—Ä–µ–ø–æ–¥–∞—é –ø—Å–∏—Ö–æ–ª–æ–≥–∏—é –≤ –í–£–ó–µ.\n"
    "–ú–Ω–µ 45 –ª–µ—Ç, –∂–µ–Ω–∞—Ç, –¥–≤–æ–µ –¥–µ—Ç–µ–π.\n\n"
    "<b>–ú–æ–π –ø–æ–¥—Ö–æ–¥</b>\n"
    "–¢—Ä–∞–Ω–∑–∞–∫—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–¢–ê) ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, "
    "–∫–∞–∫ –ø—Ä–æ—à–ª—ã–π –æ–ø—ã—Ç –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–µ–µ. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–µ–æ—Ä–∏—è, "
    "—ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π. –û–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π, "
    "–ø–æ–Ω—è—Ç–Ω—ã–π –∏ –≥–ª—É–±–æ–∫–∏–π. –ü—Ä–æ–≤–µ—Ä–µ–Ω –≤—Ä–µ–º–µ–Ω–µ–º –∏ –º–∏—Ä–æ–≤–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π. "
    "–ú–Ω–æ–≥–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ –æ—Ä–≥–∞–Ω–∏—á–Ω–æ –≤–æ–±—Ä–∞–ª–∏ –≤ —Å–µ–±—è –∫–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏ –¢–ê "
    "(—ç–≥–æ-—Å–æ—Å—Ç–æ—è–Ω–∏—è –†–æ–¥–∏—Ç–µ–ª—å, –í–∑—Ä–æ—Å–ª—ã–π, –†–µ–±–µ–Ω–æ–∫; –¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –ö–∞—Ä–ø–º–∞–Ω–∞ "
    "—Å –ø–æ–∑–∏—Ü–∏—è–º–∏ –ñ–µ—Ä—Ç–≤—ã, –°–ø–∞—Å–∞—Ç–µ–ª—è –∏ –ü—Ä–µ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è; –ñ–∏–∑–Ω–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏; "
    "–Ø ‚Äî –û–ö, —Ç—ã ‚Äî –û–ö, –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ). –û–¥–Ω–∏–º –∏–∑ –∑–Ω–∞—á–∏–º—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –¢–ê "
    "—è–≤–ª—è–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É ‚Äî —ç—Ç–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä —Ü–µ–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π, "
    "–Ω–∞–¥ –∫–æ—Ç–æ—Ä–æ–π –º—ã —Ä–∞–±–æ—Ç–∞–µ–º –≤–º–µ—Å—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã "
    "–º–æ–∂–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å. –ü—Ä–∏ —ç—Ç–æ–º –≤—Å–µ –ø–æ–¥—Ö–æ–¥—ã –ø–æ-—Å–≤–æ–µ–º—É —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã.\n\n"
    "<b>–†–∞–±–æ—Ç–∞ —Å –ø–∞—Ä–∞–º–∏</b>\n"
    "–í —Ä–∞–±–æ—Ç–µ —Å –ø–∞—Ä–∞–º–∏ —è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è, "
    "–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–∞—Ä—ã –∏ –Ω–∞–ª–∞–∂–∏–≤–∞–Ω–∏–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏. "
    "–ö–æ–≥–¥–∞ –ø–∞—Ä—Ç–Ω–µ—Ä—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∏–ª–∏ –æ–±—Ä–µ—Ç–∞—é—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ –æ—Ç–∫—Ä—ã—Ç–æ–º—É –æ–±—â–µ–Ω–∏—é "
    "–∏ –¥–æ–≤–µ—Ä–∏—é, –æ–Ω–∏ –æ–±—Ä–µ—Ç–∞—é—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è "
    "—Å–≤–æ–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –í –º–æ–µ–π –ø—Ä–∞–∫—Ç–∏–∫–µ —Ä–∞–±–æ—Ç–∞ —Å –ø–∞—Ä–∞–º–∏ —á–∞—Å—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç "
    "4‚Äì10 –≤—Å—Ç—Ä–µ—á, –Ω–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –∏ –¥–∏–Ω–∞–º–∏–∫–∏ –ø–∞—Ä—ã.\n\n"
    "<b>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</b>\n"
    "–í –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ –º—ã –º–æ–∂–µ–º —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ —Ç–µ–∫—É—â–∏—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö "
    "–∏ —Ä–µ—à–∏—Ç—å –∏—Ö –∑–∞ 1‚Äì5 –≤—Å—Ç—Ä–µ—á, –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º. "
    "–ú–Ω–æ–≥–∏–µ –Ω–∞—à–∏ –ø–æ—Å—Ç—É–ø–∫–∏, –º—ã—Å–ª–∏ –∏ —á—É–≤—Å—Ç–≤–∞ –±–∞–∑–∏—Ä—É—é—Ç—Å—è –Ω–∞ –¥–µ—Ç—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏—è—Ö, "
    "–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–≥–¥–∞-—Ç–æ –ø–æ–º–æ–≥–∞–ª–∏ –Ω–∞–º –≤—ã–∂–∏–≤–∞—Ç—å. –í–æ –≤–∑—Ä–æ—Å–ª–æ–π –∂–∏–∑–Ω–∏ –º—ã –º–æ–∂–µ–º "
    "–≤—ã–±–∏—Ä–∞—Ç—å —Å–µ–±—è –∏ –∂–∏—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É. –ú—ã –∏—Å—Å–ª–µ–¥—É–µ–º —Ä–∞–Ω–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è, "
    "–∏ –≤—ã –¥–∞–µ—Ç–µ —Å–µ–±–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∂–∏—Ç—å –¥–ª—è —Å–µ–±—è, –ø–æ–Ω–∏–º–∞—è, —á–µ–≥–æ —Ö–æ—Ç–∏—Ç–µ "
    "–∏ –∫–∞–∫ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∏—á—å.\n\n"
    "<b>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å–æ –º–Ω–æ–π</b>\n"
    "‚Ä¢ –û–±—É—á–∞—é—Å—å —É –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ï–≤—Ä–æ–ø—ã\n"
    "‚Ä¢ –ü—Ä–æ—Ö–æ–∂—É –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Å—É–ø–µ—Ä–≤–∏–∑–∏–∏ –∏ —Å–≤–µ—Ä—è—é—Å—å —Å —É—á–∏—Ç–µ–ª—è–º–∏\n"
    "‚Ä¢ –ü—Ä–æ—Ö–æ–∂—É –ª–∏—á–Ω—É—é —Ç–µ—Ä–∞–ø–∏—é, —á—Ç–æ–±—ã –Ω–∞ –≤–∞—à–∏—Ö –≤—Å—Ç—Ä–µ—á–∞—Ö —Ä–µ—à–∞—Ç—å –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã, –∞ –Ω–µ –º–æ–∏\n"
    "‚Ä¢ –° –≤–∞–º–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ –∏ —Å–æ –º–Ω–æ–π –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ ‚Äî –º—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞ —Ä–∞–≤–Ω—ã—Ö\n"
    "‚Ä¢ –û—Ç–Ω–æ—à—É—Å—å –∫ –Ω–∞—à–∏–º –≤—Å—Ç—Ä–µ—á–∞–º, –∫–∞–∫ –∫ —Ä–∞–±–æ—Ç–µ. –ó–¥–µ—Å—å –Ω–µ—Ç ¬´–Ω—Ä–∞–≤–∏—Ç—Å—è –∏–ª–∏ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è¬ª. "
    "–ï—Å—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∏ –º—ã –ø–æ –Ω–µ–º—É —Ä–∞–±–æ—Ç–∞–µ–º\n\n"
    "<b>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</b>\n"
    "–í—ã—Å—à–µ–µ, –º–∞–≥–∏—Å—Ç—Ä –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏, –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–π –ø—Å–∏—Ö–æ–ª–æ–≥, "
    "–ø—Ä–æ—Ö–æ–∂—É 4-–π –≥–æ–¥ –æ–±—É—á–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏–∫–µ –¢–ê –ø–æ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º.\n\n"
    "<b>–ü—Ä–æ—à–ª—ã–π –æ–ø—ã—Ç</b>\n"
    "–ë–æ–ª–µ–µ 20 –ª–µ—Ç —Ä–∞–±–æ—Ç–∞–ª –≤ –±–∏–∑–Ω–µ—Å-—Å—Ä–µ–¥–µ, –≤ —Ç. —á. —Ä—É–∫–æ–≤–æ–¥–∏–ª –æ—Ç–¥–µ–ª–æ–º "
    "–±–æ–ª–µ–µ 40 —á–µ–ª–æ–≤–µ–∫ –≤ 25 —Ä–µ–≥–∏–æ–Ω–∞—Ö. –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–∏–∑–Ω–µ—Å, –Ω–∞–π–º –≤ –∫–æ–º–ø–∞–Ω–∏—è—Ö "
    "—Ä–∞–∑–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. –û—Å–æ–∑–Ω–∞–Ω–Ω–æ –ø–µ—Ä–µ—à–µ–ª –≤ –ø–æ–º–æ–≥–∞—é—â—É—é —Å—Ñ–µ—Ä—É –æ–∫–æ–ª–æ 5 –ª–µ—Ç –Ω–∞–∑–∞–¥. "
    "–≠—Ç–æ—Ç –æ–ø—ã—Ç –æ—á–µ–Ω—å —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫—Ä—É–≥–æ–∑–æ—Ä –∏ –ø–æ–º–æ–≥–∞–µ—Ç —à–∏—Ä–µ –≤–∏–¥–µ—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è, "
    "–º–æ—Ç–∏–≤—ã, –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –ª—é–¥–µ–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.\n\n"
    "<b>–§–æ—Ä–º–∞—Ç—ã —Ä–∞–±–æ—Ç—ã</b>\n"
    "–û–Ω–ª–∞–π–Ω –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É –∏–ª–∏ –∫–∞–±–∏–Ω–µ—Ç –≤ –ö–æ—Å—Ç—Ä–æ–º–µ –∏ –ú–æ—Å–∫–≤–µ.\n\n"
    "–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è? –ù–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ, –∏ –º—ã –Ω–∞–π–¥–µ–º –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –≤—Ä–µ–º—è "
    "–¥–ª—è –ø–µ—Ä–≤–æ–π –≤—Å—Ç—Ä–µ—á–∏!"
)

# ‚îÄ‚îÄ‚îÄ –®–∞–≥–∏ –ø–æ–¥–±–æ—Ä–∞ —Ü–µ–Ω—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

STEP_FORMAT = (
    "üí∞ <b>–°—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</b>\n\n"
    "<b>–í –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —É–¥–æ–±–Ω–µ–µ?</b>"
)

STEP_TYPE_OFFLINE = (
    "üè¢ <b>–û—á–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ ‚Äî –≥. –ö–æ—Å—Ç—Ä–æ–º–∞</b>\n\n"
    "<b>–ö–∞–∫–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?</b>"
)

STEP_TYPE_ONLINE = (
    "üñ• <b>–û–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</b>\n\n"
    "<b>–ö–∞–∫–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?</b>"
)


def price_result_text(session_type: str, price: str, duration: str, format_label: str) -> str:
    type_label = "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è" if session_type == "individual" else "–ü–∞—Ä–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"
    first_dur = "1 —á–∞—Å 20 –º–∏–Ω—É—Ç" if session_type == "individual" else "1 —á–∞—Å 50 –º–∏–Ω—É—Ç"

    return (
        f"‚úÖ <b>{type_label}</b>\n"
        f"–§–æ—Ä–º–∞—Ç: {format_label}\n\n"
        f"üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: <b>{price}</b>\n"
        f"‚è± –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: <b>{duration}</b>\n\n"
        f"ü§ù <b>–ü–µ—Ä–≤–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</b> –±—É–¥–µ—Ç –¥–ª–∏–Ω–Ω–µ–µ ‚Äî <b>{first_dur}</b> "
        f"(+30 –º–∏–Ω—É—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –∏ –ø—Ä–æ—è—Å–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª —Ä–∞–±–æ—Ç—ã).\n\n"
        f"–û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ—Å–ª–µ —Å–µ—Å—Å–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ –∫–∞—Ä—Ç—É. –í—ã –ø–æ–ª—É—á–∏—Ç–µ —á–µ–∫."
    )


# ‚îÄ‚îÄ‚îÄ –°–æ–≥–ª–∞—Å–∏–µ (–¥–≤–æ–π–Ω–∞—è –≥–∞–ª–æ—á–∫–∞) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

def consent_status_text(pd_accepted: bool, privacy_accepted: bool) -> str:
    check_pd = "‚úÖ" if pd_accepted else "‚¨ú"
    check_pr = "‚úÖ" if privacy_accepted else "‚¨ú"

    text = (
        "üìù <b>–ó–∞–ø–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</b>\n\n"
        "–î–ª—è –∑–∞–ø–∏—Å–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ "
        "–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ (—ç—Ç–æ–≥–æ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ):\n\n"
        f"{check_pd} –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n"
        f"{check_pr} –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏\n"
    )

    if pd_accepted and privacy_accepted:
        text += (
            "\n‚úÖ <b>–í—ã –ø—Ä–∏–Ω—è–ª–∏ –æ–±–∞ —É—Å–ª–æ–≤–∏—è.</b>\n\n"
            f"–ß—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å—Å—è, –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:\n"
            f"üëâ {TELEGRAM_USERNAME}\n\n"
            "–£–∫–∞–∂–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞:\n"
            "‚Ä¢ –í–∞—à–µ –∏–º—è\n"
            "‚Ä¢ –£–¥–æ–±–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–æ–Ω–ª–∞–π–Ω / –æ—á–Ω–æ)\n"
            "‚Ä¢ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∏–ª–∏ –ø–∞—Ä–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è\n"
            "‚Ä¢ –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è\n\n"
            "–Ø –æ—Ç–≤–µ—á—É –≤ —Ç–µ—á–µ–Ω–∏–µ <b>2 —á–∞—Å–æ–≤</b> –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è."
        )
    else:
        text += "\n<i>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø—É–Ω–∫—Ç, —á—Ç–æ–±—ã –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –∏ –ø—Ä–∏–Ω—è—Ç—å.</i>"

    return text


def consent_keyboard(pd_accepted: bool, privacy_accepted: bool) -> InlineKeyboardMarkup:
    check_pd = "‚úÖ" if pd_accepted else "‚¨ú"
    check_pr = "‚úÖ" if privacy_accepted else "‚¨ú"

    buttons = [
        [InlineKeyboardButton(
            f"{check_pd} –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö",
            callback_data="toggle_pd"
        )],
        [InlineKeyboardButton(
            f"{check_pr} –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏",
            callback_data="toggle_privacy"
        )],
    ]

    if pd_accepted and privacy_accepted:
        buttons.append([InlineKeyboardButton(
            f"üí¨ –ù–∞–ø–∏—Å–∞—Ç—å {TELEGRAM_USERNAME}",
            url=f"https://t.me/{TELEGRAM_USERNAME.lstrip('@')}"
        )])

    buttons.append([InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")])
    return InlineKeyboardMarkup(buttons)


# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# –ö–õ–ê–í–ò–ê–¢–£–†–´
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

def main_menu_keyboard() -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏", callback_data="price_start")],
        [InlineKeyboardButton("üë§ –û–±–æ –º–Ω–µ –∏ –º–µ—Ç–æ–¥–∞—Ö —Ä–∞–±–æ—Ç—ã", callback_data="about")],
        [InlineKeyboardButton("üìù –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é", callback_data="appointment")],
    ])


def back_button() -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(
        [[InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")]]
    )


def price_and_menu_buttons() -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("üìù –ó–∞–ø–∏—Å–∞—Ç—å—Å—è", callback_data="appointment")],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")],
    ])


def format_keyboard() -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("üè¢ –û—á–Ω–æ (–ö–æ—Å—Ç—Ä–æ–º–∞)", callback_data="fmt_offline")],
        [InlineKeyboardButton("üñ• –û–Ω–ª–∞–π–Ω", callback_data="fmt_online")],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")],
    ])


def type_keyboard(prefix: str) -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("üë§ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è", callback_data=f"type_{prefix}_ind")],
        [InlineKeyboardButton("üë• –ü–∞—Ä–Ω–∞—è", callback_data=f"type_{prefix}_couple")],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="price_start")],
    ])


# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≥–∞–ª–æ—á–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º /start
    context.user_data["pd_accepted"] = False
    context.user_data["privacy_accepted"] = False
    await update.message.reply_text(
        WELCOME_TEXT,
        reply_markup=main_menu_keyboard(),
        parse_mode="HTML",
    )


async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    query = update.callback_query
    await query.answer()
    data = query.data

    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –µ—Å–ª–∏ –Ω–µ—Ç
    context.user_data.setdefault("pd_accepted", False)
    context.user_data.setdefault("privacy_accepted", False)

    # ‚îÄ‚îÄ‚îÄ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if data == "main_menu":
        await query.edit_message_text(
            text=WELCOME_TEXT, reply_markup=main_menu_keyboard(), parse_mode="HTML",
        )
        return

    # ‚îÄ‚îÄ‚îÄ –û–±–æ –º–Ω–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if data == "about":
        await query.edit_message_text(
            text=ABOUT_TEXT, reply_markup=back_button(), parse_mode="HTML",
        )
        return

    # ‚îÄ‚îÄ‚îÄ –°—Ç–æ–∏–º–æ—Å—Ç—å: —à–∞–≥ 1 ‚Äî —Ñ–æ—Ä–º–∞—Ç ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if data == "price_start":
        await query.edit_message_text(
            text=STEP_FORMAT, reply_markup=format_keyboard(), parse_mode="HTML",
        )
        return

    # ‚îÄ‚îÄ‚îÄ –°—Ç–æ–∏–º–æ—Å—Ç—å: —à–∞–≥ 2 ‚Äî —Ç–∏–ø ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if data == "fmt_offline":
        await query.edit_message_text(
            text=STEP_TYPE_OFFLINE, reply_markup=type_keyboard("offline"), parse_mode="HTML",
        )
        return

    if data == "fmt_online":
        await query.edit_message_text(
            text=STEP_TYPE_ONLINE, reply_markup=type_keyboard("online"), parse_mode="HTML",
        )
        return

    # ‚îÄ‚îÄ‚îÄ –°—Ç–æ–∏–º–æ—Å—Ç—å: —Ñ–∏–Ω–∞–ª ‚Äî —Ü–µ–Ω–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    price_map = {
        "type_offline_ind":    ("individual", PRICE_OFFLINE_IND,    DURATION_IND,    "–æ—á–Ω–æ, –≥. –ö–æ—Å—Ç—Ä–æ–º–∞"),
        "type_offline_couple": ("couples",    PRICE_OFFLINE_COUPLE, DURATION_COUPLE, "–æ—á–Ω–æ, –≥. –ö–æ—Å—Ç—Ä–æ–º–∞"),
        "type_online_ind":     ("individual", PRICE_ONLINE_IND,     DURATION_IND,    "–æ–Ω–ª–∞–π–Ω"),
        "type_online_couple":  ("couples",    PRICE_ONLINE_COUPLE,  DURATION_COUPLE, "–æ–Ω–ª–∞–π–Ω"),
    }

    if data in price_map:
        stype, price, dur, fmt = price_map[data]
        text = price_result_text(stype, price, dur, fmt)
        await query.edit_message_text(
            text=text, reply_markup=price_and_menu_buttons(), parse_mode="HTML",
        )
        return

    # ‚îÄ‚îÄ‚îÄ –ó–∞–ø–∏—Å—å: —ç–∫—Ä–∞–Ω —Å –≥–∞–ª–æ—á–∫–∞–º–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if data == "appointment":
        pd = context.user_data["pd_accepted"]
        pr = context.user_data["privacy_accepted"]
        await query.edit_message_text(
            text=consent_status_text(pd, pr),
            reply_markup=consent_keyboard(pd, pr),
            parse_mode="HTML",
        )
        return

    # ‚îÄ‚îÄ‚îÄ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≥–∞–ª–æ—á–∫–∏ –ü–î ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if data == "toggle_pd":
        if not context.user_data["pd_accepted"]:
            # –ü–µ—Ä–≤–æ–µ –Ω–∞–∂–∞—Ç–∏–µ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç
            await query.edit_message_text(
                text=(
                    "üìã <b>–°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</b>\n\n"
                    f"–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–æ–º:\n"
                    f"üëâ <a href=\"{LINK_PERSONAL_DATA}\">–û—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</a>\n\n"
                    "–ü–æ—Å–ª–µ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ."
                ),
                reply_markup=InlineKeyboardMarkup([
                    [InlineKeyboardButton("‚úÖ –ü—Ä–∏–Ω–∏–º–∞—é —É—Å–ª–æ–≤–∏—è", callback_data="accept_pd")],
                    [InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="appointment")],
                ]),
                parse_mode="HTML",
                disable_web_page_preview=True,
            )
        else:
            # –°–Ω–∏–º–∞–µ–º –≥–∞–ª–æ—á–∫—É
            context.user_data["pd_accepted"] = False
            pd = context.user_data["pd_accepted"]
            pr = context.user_data["privacy_accepted"]
            await query.edit_message_text(
                text=consent_status_text(pd, pr),
                reply_markup=consent_keyboard(pd, pr),
                parse_mode="HTML",
            )
        return

    # ‚îÄ‚îÄ‚îÄ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≥–∞–ª–æ—á–∫–∏ –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å
    if data == "toggle_privacy":
        if not context.user_data["privacy_accepted"]:
            await query.edit_message_text(
                text=(
                    "üîí <b>–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</b>\n\n"
                    f"–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–æ–º:\n"
                    f"üëâ <a href=\"{LINK_PRIVACY_POLICY}\">–û—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</a>\n\n"
                    "–ü–æ—Å–ª–µ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ."
                ),
                reply_markup=InlineKeyboardMarkup([
                    [InlineKeyboardButton("‚úÖ –ü—Ä–∏–Ω–∏–º–∞—é —É—Å–ª–æ–≤–∏—è", callback_data="accept_privacy")],
                    [InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="appointment")],
                ]),
                parse_mode="HTML",
                disable_web_page_preview=True,
            )
        else:
            context.user_data["privacy_accepted"] = False
            pd = context.user_data["pd_accepted"]
            pr = context.user_data["privacy_accepted"]
            await query.edit_message_text(
                text=consent_status_text(pd, pr),
                reply_markup=consent_keyboard(pd, pr),
                parse_mode="HTML",
            )
        return

    # ‚îÄ‚îÄ‚îÄ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ü–î ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if data == "accept_pd":
        context.user_data["pd_accepted"] = True
        pd = context.user_data["pd_accepted"]
        pr = context.user_data["privacy_accepted"]
        await query.edit_message_text(
            text=consent_status_text(pd, pr),
            reply_markup=consent_keyboard(pd, pr),
            parse_mode="HTML",
        )
        return

    # ‚îÄ‚îÄ‚îÄ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if data == "accept_privacy":
        context.user_data["privacy_accepted"] = True
        pd = context.user_data["pd_accepted"]
        pr = context.user_data["privacy_accepted"]
        await query.edit_message_text(
            text=consent_status_text(pd, pr),
            reply_markup=consent_keyboard(pd, pr),
            parse_mode="HTML",
        )
        return


# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# –ó–ê–ü–£–°–ö
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

def main() -> None:
    logging.basicConfig(
        format="%(asctime)s - %(name)s - %(levelname)s - %(message)s",
        level=logging.INFO,
    )

    app = Application.builder().token(BOT_TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(button_handler))

    print(f"ü§ñ –ë–æ—Ç {PSYCHOLOGIST_NAME} –∑–∞–ø—É—â–µ–Ω!")
    app.run_polling()


if __name__ == "__main__":
    main()
